{"swagger":"2.0","info":{"description":"This is simple user segmentation service","title":"ravito","contact":{},"version":"1.0"},"host":"localhost:8084","basePath":"/","paths":{"/segment":{"post":{"description":"Creates new segment, upadd parameter sets number of percents of user send to the new segment","consumes":["application/json"],"produces":["application/json"],"tags":["ravito"],"parameters":[{"description":"query params","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handlers_segment.Request"}}],"responses":{"200":{"description":"api response","schema":{"$ref":"#/definitions/handlers_segment.Response"}}}},"delete":{"description":"Deletes segments and deletes all relations to this segment","consumes":["application/json"],"produces":["application/json"],"tags":["ravito"],"parameters":[{"description":"query params","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handlers_segment.RequestDelete"}}],"responses":{"200":{"description":"api response","schema":{"$ref":"#/definitions/handlers_segment.Response"}}}}},"/user/{userid}":{"get":{"consumes":["application/json"],"produces":["application/json"],"tags":["ravito"],"parameters":[{"type":"integer","description":"user id","name":"userid","in":"path","required":true}],"responses":{"200":{"description":"api response","schema":{"$ref":"#/definitions/handlers_user.UserResponse"}}}}},"/user/{userid}/add":{"post":{"description":"If needed, creates user, then adds user to specified segments and deletes from specified\nIn optional dictionary you can specify expiration date for every added segments","consumes":["application/json"],"produces":["application/json"],"tags":["ravito"],"parameters":[{"type":"integer","description":"user id","name":"userid","in":"path","required":true},{"description":"query params","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handlers_user.RequestUserSlugs"}}],"responses":{"200":{"description":"api response","schema":{"$ref":"#/definitions/handlers_user.Response"}}}}},"/user/{userid}/csv":{"post":{"description":"year and month params set the left border of time interval\nin which search will be conducted","consumes":["application/json"],"produces":["application/json"],"tags":["ravito"],"parameters":[{"type":"integer","description":"user id","name":"userid","in":"path","required":true},{"description":"query params","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/handlers_user.RequestUserStory"}}],"responses":{"200":{"description":"OK","schema":{"type":"file"}}}}}},"definitions":{"gorm.DeletedAt":{"type":"object","properties":{"time":{"type":"string"},"valid":{"description":"Valid is true if Time is not NULL","type":"boolean"}}},"handlers_segment.Request":{"type":"object","required":["slug"],"properties":{"slug":{"type":"string"},"upadd":{"type":"integer"}}},"handlers_segment.RequestDelete":{"type":"object","required":["slug"],"properties":{"slug":{"type":"string"}}},"handlers_segment.Response":{"type":"object","properties":{"error":{"type":"string"},"status":{"type":"string"}}},"handlers_user.RequestUserSlugs":{"type":"object","properties":{"AddTo":{"type":"array","items":{"type":"string"}},"RemoveFrom":{"type":"array","items":{"type":"string"}},"ttl_days":{"type":"object","additionalProperties":{"type":"integer"}}}},"handlers_user.RequestUserStory":{"type":"object","required":["month","year"],"properties":{"month":{"type":"integer"},"year":{"type":"integer"}}},"handlers_user.Response":{"type":"object","properties":{"error":{"type":"string"},"status":{"type":"string"}}},"handlers_user.UserResponse":{"type":"object","properties":{"error":{"type":"string"},"segments":{"type":"array","items":{"$ref":"#/definitions/models.Segment"}},"status":{"type":"string"}}},"models.Segment":{"type":"object","properties":{"createdAt":{"type":"string"},"deletedAt":{"$ref":"#/definitions/gorm.DeletedAt"},"id":{"type":"integer"},"slug":{"type":"string"},"updatedAt":{"type":"string"}}}}}